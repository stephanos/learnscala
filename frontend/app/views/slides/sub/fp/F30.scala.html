<!--
    TODO
        - good flatMap & Option example
-->
@implicitSlide = @{ Content.funktionen4 }

@defining(implicitSlide.label) { implicit topic =>

    @layout.slidedeck(topic) {

        @slidehead() {
            @topic
        } {
            @image("fx.png", clazz = "naked", height = 200)
            @spacer_half()
            Funktionen und Kollektionen
        }

        <!-- ################################################################################## -->

        <!-- TODO: Currying -->

        <!-- ################################################################################## -->

        @defining("foldLeft") { title =>

            @titleslide(title = title) {

                @*
                println((1 to 1000000) reduceLeft(_ + _))  // tail rec
                println((1 to 1000000) reduceRight(_ + _)) // overflow
                *@

                @autocenter {
                    @sourcecode() {
                        |trait Traversable[A] {
                        |  def foldLeft[B](z: B)(f: (B, A) => B): B
                        |}
                    }
                    @codesub2() {
                        transformiert Elemente vom Typ <code>A</code> in Ergebnis vom Typ <code>B</code>
                    }
                }

                @spacer()

                @sidebyside(gap = 10) {

                    @snippet() {
                        @callblock(reference = "nums") {
                            |nums foldLeft(0) { (res, num) =>
                            |  res + num
                            |}
                        }
                        @outblock() {
                            |res0: Int = 10
                        }
                    }
                    @codesub2() {
                        Summe der Elemente
                    }
                } {
                    @snippet() {
                        @callblock(reference = "nums") {
                            |nums foldLeft(0) { (res, num) =>
                            |  println("= " + res + " + " + num)
                            |  res + num
                            |}
                        }
                        @outblock() {
                            |= 0 + 1
                            |= 1 + 2
                            |= 3 + 3
                            |= 6 + 4
                            |res1: Int = 10
                        }
                    }
                    @codesub2() {
                        mit Zwischenergebnissen
                    }
                }
            }
        }
    }
}