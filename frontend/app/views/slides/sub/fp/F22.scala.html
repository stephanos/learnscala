@implicitSlide = @{ Content.listen }

@defining(implicitSlide.label) { implicit topic =>

    @layout.slidedeck(topic) {

        @slidehead() {
            @topic
        } {

        }

        <!-- ################################################################################## -->

        @defining("Konstruktion") { title =>

            @titleslide(title = title) {

                @sidebyside(gap = 10) {

                    <h4 class="fragment tcenter">(A)</h4>

                    @spacer()

                    @snippet() {
                        @callblock() {
                            |List (1, 2, 3, 4)
                        }
                        @outblock() {
                            |res0: List[Int] = List(1, 2, 3, 4
                        }
                        @callblock() {
                            |List apply (1,2,3,4)
                        }
                        @outblock() {
                            |res1: List[Int] = List(1, 2, 3, 4
                        }
                    }
                    @codesub2() {
                        Konstruktion über <code>List</code>-Objekt
                    }
                } {
                    <h4 class="fragment tcenter">(B)</h4>

                    @spacer()

                    @snippet() {
                        @callblock() {
                            |1 :: 2 :: 3 :: Nil
                        }
                        @outblock() {
                            |res0: List[Int] = List(1, 2, 3)
                        }
                        @callblock() {
                            |1 :: (2 :: (3 :: Nil))
                        }
                        @outblock() {
                            |res1: List[Int] = List(1, 2, 3)
                        }
                        @callblock() {
                            |Nil.::(3).::(2).::(1)
                        }
                        @outblock() {
                            |res2: List[Int] = List(1, 2, 3)
                        }
                    }
                    @codesub2() {
                        Konstruktion über Konstante <code>Nil</code> und <br/>
                        rechtsassoziativen Operator <code>::</code>
                    }
                }
            }

            <!-- ################################################################################## -->

            @titleslide(title = title) {
                <h4 class="fragment tcenter">(C)</h4>

                @spacer()

                @snippet() {
                    @callblock() {
                        |import scala.collection.mutable.ListBuffer
                        |val buf = new ListBuffer[Int]
                    }
                    @outblock() {
                        |buf: ListBuffer[Int] = ListBuffer()
                    }
                    @callblock() {
                        |buf += 1
                        |buf += 2
                        |buf += 3
                        |buf.toList
                    }
                    @outblock() {
                        |res3: List[Int] = List(1, 2, 3)
                    }
                }
                @codesub2() {
                    <code>ListBuffer</code> konstruiert sehr effizient
                }
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "Typ") {

            @snippet() {
                @callblock() {
                    |List()
                }
                @outblock() {
                    |res0: List[Nothing] = List ()
                }
            }
            @codesub2() {
                leere Liste
            }

            @spacer()

            @snippet() {
                @callblock() {
                    |List(1, true)
                }
                @outblock() {
                    |res0: List[AnyVal] = List (1, true)
                }
            }
            @codesub2() {
                Liste mit <code>Int</code> und <code>Boolean</code>
            }

            @spacer()

            @snippet() {
                @callblock() {
                    |List(1, "a")
                }
                @outblock() {
                    |res0: List[Any] = List (1, a)
                }
            }
            @codesub2() {
                Liste mit <code>Int</code> und <code>String</code>
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "Aufbau", clazz = "wide") {

            @Images.list()

            @spacer()

            @sidebyside((30,70), gap = 3) {
                @snippet() {
                    @callblock() {
                        |List(1, 2, 3).head
                    }
                    @outblock() {
                        |res0: Int = 1
                    }
                }
            } {
                @sidebyside(gap = 10) {
                    @snippet() {
                        @callblock() {
                            |List(1, 2, 3).tail
                        }
                        @outblock() {
                            |res0: List[Int] = List(2,3)
                        }
                    }
                } {
                    @snippet() {
                        @callblock() {
                            |List(1).tail
                        }
                        @outblock() {
                            |res0: List[Int] = List()
                        }
                    }
                }
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "Verarbeitung") {

            @spacer()

            @sidebyside(gap = 10) {
                <h4 class="fragment tcenter">(A) Methoden</h4>

                @spacer()

                @snippet() {
                    @sourceblock(id = "sum-rec") {
                        |def sum (lst: List[Int]): Int =
                        |  if (lst == Nil)
                        |    0
                        |  else
                        |    lst.head + sum (lst.tail)
                    }
                }
                @codesub2() {
                    via Methoden <code>head</code> und <code>tail</code>
                }
            } {
                <h4 class="fragment tcenter">(B) Pattern Matching</h4>

                @spacer()

                @snippet() {
                    @sourceblock(id = "sum-pm") {
                        |def sum (lst: List[Int]): Int =
                        |  lst match {
                        |    case Nil => 0
                        |    case head :: t => head + sum(t)
                        |  }
                    }
                }
                @codesub2() {
                    via Dekomposition in <code>head</code> und <code>tail</code>
                }
            }
        }

        <!-- ################################################################################## -->

        @uebung(implicitSlide.id)
    }
}