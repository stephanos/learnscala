@implicitSlide = @{ Content.listen }

@defining(implicitSlide.label) { implicit topic =>

    @layout.slidedeck(topic) {

        @slidehead() {
            @topic
        } {

        }

        <!-- ################################################################################## -->

        @defining("Konstruktion") { title =>

            @titleslide(title = title) {

                @sidebyside(gap = 10) {

                    <h4 class="fragment tcenter">(A)</h4>

                    @spacer()

                    @snippet() {
                        @callblock() {
                            |Seq(1, 2, 3, 4)
                        }
                        @outblock() {
                            |res0: Seq[Int] = List(1, 2, 3, 4)
                        }
                    }
                    @iseq()
                    @snippet() {
                        @callblock() {
                            |Seq.apply(1,2,3,4)
                        }
                        @outblock() {
                            |res1: List[Int] = List(1, 2, 3, 4)
                        }
                    }
                    @codesub2() {
                        Konstruktion über <code>List</code>-Objekt
                    }
                } {
                    <h4 class="fragment tcenter">(B)</h4>

                    @spacer()

                    @snippet() {
                        @callblock() {
                            |1 :: 2 :: 3 :: Nil
                        }
                        @outblock() {
                            |res0: List[Int] = List(1, 2, 3)
                        }
                    }
                    @iseq()
                    @snippet() {
                        @callblock() {
                            |1 :: (2 :: (3 :: Nil))
                        }
                        @outblock() {
                            |res1: List[Int] = List(1, 2, 3)
                        }
                    }
                    @iseq()
                    @snippet() {
                        @callblock() {
                            |Nil.::(3).::(2).::(1)
                        }
                        @outblock() {
                            |res2: List[Int] = List(1, 2, 3)
                        }
                    }
                    @codesub2() {
                        Konstruktion über Konstante <code>Nil</code> und <br/>
                        rechtsassoziativen Operator <code>::</code>
                    }
                }
            }

            <!-- ################################################################################## -->

            @titleslide(title = "Exkurs: Nichts und leer") {
                <!--
                    http://oldfashionedsoftware.com/2008/08/20/a-post-about-nothing/
                    http://blog.sanaulla.info/2009/07/12/nothingness/
                -->

                @defining((10,20,70)) { layout =>

                    @fragment {
                        @sidebysidebyside(layout) {
                            <code>Unit</code>
                        } {
                            @fragment {
                                Typ einer Methode, ohne Rückgabe
                            }
                        } {
                            @sidebyside() {
                                @snippet(clazz = "slim") {
                                    @callblock() {
                                        |val r = println("Hello")
                                    }
                                    @outblock() {
                                        |r: Unit = ()
                                    }
                                }
                            } {
                                @snippet(clazz = "slim") {
                                    @callblock() {
                                        |val r = ()
                                    }
                                    @outblock() {
                                        |r: Unit = ()
                                    }
                                }
                            }
                        }
                    }

                    @spacer_half()

                    @fragment {
                        @sidebysidebyside(layout) {
                            <code>None</code>
                        } {
                            @fragment {
                                Konstante für eine leere <code>Option</code>
                            }
                        } {
                            @sidebyside() {
                                @snippet(clazz = "slim") {
                                    @callblock() {
                                        |Option(null)
                                    }
                                    @outblock() {
                                        |res0: Option[Null] = None
                                    }
                                }
                            } {
                                @snippet(clazz = "slim") {
                                    @callblock() {
                                        |Option(null).getOrElse(1)
                                    }
                                    @outblock() {
                                        |res0: Any = 1
                                    }
                                }
                            }
                        }
                    }

                    @spacer_half()

                    @fragment {
                        @sidebysidebyside(layout) {
                            <code>Nil</code>
                        } {
                            @fragment {
                                Konstante für eine leere Liste
                            }
                        } {
                            @sidebyside() {
                                @snippet(clazz = "slim") {
                                    @callblock() {
                                        |Nil == List()
                                    }
                                    @outblock() {
                                        |res0: Boolean = true
                                    }
                                }
                            } {
                                @snippet(clazz = "slim") {
                                    @callblock() {
                                        |1 :: Nil
                                    }
                                    @outblock() {
                                        |res0: List[Int] = List(1
                                    }
                                }
                            }
                        }
                    }


                    @spacer_half()

                    @fragment {
                        @sidebysidebyside(layout) {
                            <code>Nothing</code>
                        } {
                            @fragment {
                                Unterklasse von "allem"
                            }
                        } {
                            @sidebyside() {
                                @snippet(clazz = "slim") {
                                    @callblock() {
                                        |def m = sys.error("error")
                                    }
                                    @outblock() {
                                        |m: Nothing
                                    }
                                }
                            } {
                                @snippet(clazz = "slim") {
                                    @callblock() {
                                        |val l = List()
                                    }
                                    @outblock() {
                                        |l: List[Nothing] = List()
                                    }
                                }
                            }
                        }
                    }

                    @spacer_half()

                    @fragment {
                        @sidebysidebyside(layout) {
                            <code>Null</code>
                        } {
                            @fragment {
                                Unterklasse aller Referenztypen,
                                einziger möglicher Wert: <code>null</code>
                            }
                        } {
                            @sidebyside() {
                                @snippet(clazz = "slim") {
                                    @callblock() {
                                        |val n = null
                                    }
                                    @outblock() {
                                        |n: Null = null
                                    }
                                }
                            } {
                                @snippet(clazz = "slim") {
                                    @callblock() {
                                        |def n: String = null
                                    }
                                    @outblock() {
                                        |n: String = null
                                    }
                                }
                            }
                        }
                    }
                }
            }

            <!-- ################################################################################## -->

            @titleslide(title = title, subtitle = "II", connector = "") {
                <h4 class="fragment tcenter">(C)</h4>

                @spacer()

                @snippet() {
                    @callblock() {
                        |import scala.collection.mutable
                        |val buf = new mutable.ListBuffer[Int]
                    }
                    @outblock() {
                        |buf: ListBuffer[Int] = ListBuffer()
                    }
                    @callblock() {
                        |buf += 1
                        |buf += 2
                        |buf += 3
                        |buf.toList
                    }
                    @outblock() {
                        |res3: List[Int] = List(1, 2, 3)
                    }
                }
                @codesub2() {
                    <code>ListBuffer</code> konstruiert sehr effizient
                }
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "Typparameter") {

            @snippet() {
                @callblock() {
                    |List()
                }
                @outblock() {
                    |res0: List[Nothing] = List()
                }
            }
            @codesub2() {
                Typ <code>Nothing</code>: leere Liste
            }

            @spacer()

            @snippet() {
                @callblock() {
                    |List(1, true)
                }
                @outblock() {
                    |res0: List[AnyVal] = List(1, true)
                }
            }
            @codesub2() {
                Typ <code>AnyVal</code>: Liste mit <code>Int</code> und <code>Boolean</code>
            }

            @spacer()

            @snippet() {
                @callblock() {
                    |List(1, "a")
                }
                @outblock() {
                    |res0: List[Any] = List(1, a)
                }
            }
            @codesub2() {
                Typ <code>Any</code>: Liste mit <code>Int</code> und <code>String</code>
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "Aufbau", clazz = "wide") {

            @Images.list()

            @spacer()

            @sidebyside((30,70), gap = 3) {
                @snippet() {
                    @callblock() {
                        |List(1, 2, 3).head
                    }
                    @outblock() {
                        |res0: Int = 1
                    }
                }
            } {
                @sidebyside(gap = 10) {
                    @snippet() {
                        @callblock() {
                            |List(1, 2, 3).tail
                        }
                        @outblock() {
                            |res0: List[Int] = List(2,3)
                        }
                    }
                } {
                    @snippet() {
                        @callblock() {
                            |List(1).tail
                        }
                        @outblock() {
                            |res0: List[Int] = List()
                        }
                    }
                }
            }
        }

        <!-- ################################################################################## -->

        @quiz() {
            @Quiz.list()
        }

        <!-- ################################################################################## -->

        @titleslide(title = "Verarbeitung") {

            @spacer()

            @sidebyside(gap = 10) {
                <h4 class="fragment tcenter">(A) Methoden</h4>

                @spacer()

                @snippet() {
                    @sourceblock(id = "sum-rec") {
                        |def sum(lst: List[Int]): Int =
                        |  if (lst == Nil)
                        |    0
                        |  else
                        |    lst.head + sum(lst.tail)
                    }
                }
                @codesub2() {
                    via Methoden <code>head</code> und <code>tail</code>
                }
            } {
                <h4 class="fragment tcenter">(B) Pattern Matching</h4>

                @spacer()

                @snippet() {
                    @sourceblock(id = "sum-pm") {
                        |def sum(lst: List[Int]): Int =
                        |  lst match {
                        |    case Nil => 0
                        |    case head :: t => head + sum(t)
                        |  }
                    }
                }
                @codesub2() {
                    via Dekomposition in <code>head</code> und <code>tail</code>
                }
            }
        }

        <!-- ################################################################################## -->

        @uebung(implicitSlide.code)
    }
}