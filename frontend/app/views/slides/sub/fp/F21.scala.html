@implicitSlide = @{ Content.datatypes2 }

@defining(implicitSlide.label) { implicit topic =>

    @layout.slidedeck(topic) {

        @slidehead() {
            @topic
        } {

        }

        <!-- ################################################################################## -->

        @slide(title = "Pakete") {

            @sidebyside() {
                @Images.collectpckg()
            } {
                @spacer2()@spacer()
                <ul class="fragments">
                    <li>
                        <code>scala.collection.mutable</code> enthält <br/>
                        <var>veränderliche</var>, sequenzielle Collections
                    </li>
                    @spacer()@spacer_half()
                    <li>
                        <code>scala.collection.immutable</code> enthält <br/>
                        <em>unveränderliche</em>, sequenzielle Collections
                    </li>
                    @spacer()
                    <li>
                        <code>scala.collection.parallel.mutable</code> enthält <br/>
                        <var>veränderliche</var>, parallele Collections
                    </li>
                    <li>
                        <code>scala.collection.parallel.immutable</code> enthält <br/>
                        <em>unveränderliche</em>, parallele Collections
                    </li>
                </ul>
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "immutable vs. mutable") {

            <div class="w50p bigger dcenter">

                <blockquote class="fragment">
                    <p>
                        Für manche Probleme sind veränderliche Datenstrukturen besser geeignet,
                        für andere widerum unveränderliche.
                    </p>
                    <p>
                        Im Zweifelsfall sollte man mit einer unveränderlichen beginnen
                        - und gegebenfalls später wechseln.
                    </p>
                    <var class="who">
                        Martin Odersky
                    </var>
                </blockquote>

                @spacer2()

                <blockquote class="fragment">
                    <p>
                        Es ist angebracht Low-Level-Datenstrukturen zu verwenden,
                        wenn bessere Performance oder effizientere Speichernutzung erforderlich sind.
                    </p>
                    <var class="who">
                        Effective Scala, Twitter
                    </var>
                </blockquote>
            </div>
        }

        <!-- ################################################################################## -->

        @defining("Traversable") { title =>

            @slide(title = title, subtitle = "Hierarchie") {

                @sidebyside() {
                    @Images.collection(title)
                } {
                    @fragment {
                        <h4>Traversable</h4>
                        @spacer()
                        <div class="indent">
                            <ul class="fragments">
                                <li>Super-Klasse von allen Collections</li>
                                @spacer_half()
                                <li>
                                    abstrakte Methode <code>foreach</code>: wendet eine Funktion auf alle Elemente an
                                    @spacer_half()
                                    @sourcecode() {
                                        |def foreach[U](f: Elem => U): Unit
                                    }
                                </li>
                                @spacer_half()
                                <li>
                                    Basis-Methoden zum Hinzufügen, Abfragen, Mappen, Konvertieren, Kopieren, Teilen etc.
                                </li>
                            </ul>
                        </div>
                    }
                }
            }

            <!-- ################################################################################## -->

            @slide(title = title, subtitle = "Beispiele") {

                @sidebyside(gap = 10) {
                    @snippet() {
                        @callblock() {
                            |List(1,2) ++ List(3,4)
                        }
                        @outblock() {
                            |res0: List[Int] = List(1, 2, 3, 4)
                        }
                    }
                    @codesub2() {
                        Traversable verknüpfen
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |List(1,2,3) head
                        }
                        @outblock() {
                            |res1: Int = 1
                        }
                    }
                    @codesub2() {
                        Kopf vom Traversable
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |List(1,2,3) tail
                        }
                        @outblock() {
                            |res2: List[Int] = List(2, 3)
                        }
                    }
                    @codesub2() {
                        Schwanz vom Traversable
                    }

                    @*
                    @spacer_half()
                    @snippet() {
                        @callblock() {
                            |List(1,2,3) last
                        }
                        @outblock() {
                            |res3: Int = 3
                        }
                    }*@

                    @spacer2()

                    @*
                    @snippet() {
                        @callblock() {
                            |List(1,2,3) mkString ","
                        }
                        @outblock() {
                            |res4: String = 1,2,3
                        }
                    }

                    @spacer_half()

                    @snippet() {
                        @callblock() {
                            |List(1,2,3) sum
                        }
                        @outblock() {
                            |res5: Int = 6
                        }
                    }
                    *@
                } {
                    @snippet() {
                        @callblock() {
                            |List(1,2,3) take 2
                        }
                        @outblock() {
                            |res6: List[Int] = List(1, 2)
                        }
                    }
                    @codesub2() {
                        Elemente extrahieren
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |List(1,2,3) drop 2
                        }
                        @outblock() {
                            |res7: List[Int] = List(3)
                        }
                    }
                    @codesub2() {
                        Elemente entfernen
                    }

                    @*
                    @snippet() {
                        @callblock() {
                            |List(1,2,3) toArray
                        }
                        @outblock() {
                            |res8: Array[Int) = Array(1,2,3)
                        }
                    }
                    *@

                    @*
                    @spacer_half()
                    @snippet() {
                        @callblock() {
                            |List(1,2,3) size
                        }
                        @outblock() {
                            |res9: Int = 3
                        }
                    }*@

                    @*
                    @spacer_half()
                    @snippet() {
                        @callblock() {
                            |List(1,2,3) map (_ * 2)
                        }
                        @outblock() {
                            |res10: List[Int] = List(2,4,6)
                        }
                    }
                    @spacer_half()
                    @snippet() {
                        @callblock() {
                            |List(1,2,3) filter (_ % 2 == 0)
                        }
                        @outblock() {
                            |res11: List[Int] = List(2)
                        }
                    }
                    *@
                }
            }
        }

        <!-- ################################################################################## -->

        @defining("Iterable") { title =>

            @slide(title = title, subtitle = "Hierarchie") {

                @sidebyside() {
                    @Images.collection(title)
                } {
                    @fragment {
                        <h4>Iterable</h4>
                        @spacer()
                        <div class="indent">
                            <ul class="fragments">
                                <li>erbt von <code>Traversable</code></li>
                                @spacer_half()
                                <li>
                                    implementiert <code>foreach</code>
                                    @spacer_half()
                                    @sourcecode() {
                                        |def foreach[U](f: Elem => U) {
                                        |  val it = iterator
                                        |  while (it.hasNext) f(it.next())
                                        |}
                                    }
                                </li>
                                @spacer_half()
                                <li>
                                    abstrakte Methode <code>iterator</code>
                                    @spacer_half()
                                    @sourcecode() {
                                        |def iterator: Iterator[A]
                                    }
                                </li>
                            </ul>
                        </div>
                    }
                }

                <details>
                    <a href="http://stackoverflow.com/questions/7425370/">
                        What is the difference between Traversable and Iterable traits?
                    </a>
                </details>
            }
        }

        <!-- ################################################################################## -->

        @defining("Set") { title =>

            @slide(title = title, subtitle = "Hierarchie") {

                @sidebyside() {
                    @Images.collection(title)
                } {
                    @fragment {
                        <h4>Set</h4>
                        @spacer()
                        <div class="indent">
                            <ul class="fragments">
                                <li><code>Iterable</code> ohne gleiche Elemente</li>
                                @spacer_half()
                                <li>
                                    <code>HashSet</code>
                                    @spacer_half()
                                    <ul>
                                        <li>Standardimplementierung</li>
                                        <li>
                                            sortiert nach <code>hashCode</code>;
                                            beschleunigt Zugriff auf beliebige Elemente
                                        </li>
                                    </ul>
                                </li>
                                @spacer_half()
                                <li>
                                    <code>SortedSet</code>
                                    @spacer_half()
                                    <ul>
                                        <li>
                                            sortiert Elemente beim Einfügen
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    }
                }
            }

            <!-- ################################################################################## -->

            @slide(title = title, subtitle = "Beispiele") {

                @sidebyside(gap = 10) {
                    @snippet() {
                        @callblock() {
                            |Set(1, 2, 3)
                        }
                        @outblock() {
                            |res0: Set[Int] = Set(1, 2, 3)
                        }
                    }
                    @codesub2() {
                        Set initialisieren
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |Set(1, 2, 3) union Set(2, 4)
                        }
                        @outblock() {
                            |res1: Set[Int] = Set(1, 2, 3, 4)
                        }
                    }
                    @codesub2() {
                        Vereinigungsmenge bilden
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |Set(1, 2, 3) intersect Set(1)
                        }
                        @outblock() {
                            |res2: Set[Int] = Set(1)
                        }
                    }
                    @codesub2() {
                        Schnittmenge ermitteln
                    }
                } {
                    @snippet() {
                        @callblock() {
                            |Set(1) subsetOf Set(1, 2, 3)
                        }
                        @outblock() {
                            |res3: Boolean = true
                        }
                    }
                    @codesub2() {
                        Teilmenge überprüfen
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |Set(1, 2, 3) diff Set(2)
                        }
                        @outblock() {
                            |res4: Set[Int] = Set(1, 3)
                        }
                    }
                    @codesub2() {
                        Differenz finden
                    }
                }

                @*

                @spacer_half()
                @snippet() {
                    @callblock() {
                        |Set(1, 2, 3) + 4
                    }
                    @outblock() {
                        |res1: Set[Int] = Set(1, 2, 3, 4)
                    }
                }
                @spacer_half()
                @snippet() {
                    @callblock() {
                        |Set(1, 2, 3) + 3
                    }
                    @outblock() {
                        |res2: Set[Int] = Set(1, 2, 3)
                    }
                }
                @spacer_half()
                @snippet() {
                    @callblock() {
                        |Set(1, 2, 3) ++ Set(2, 4)
                    }
                    @outblock() {
                        |res4: Set[Int] = Set(1, 2, 3, 4)
                    }
                }
                @spacer_half()
                @snippet() {
                    @callblock() {
                        |Set(1, 2, 3) -- Set(1, 2)
                    }
                    @outblock() {
                        |res5: Set[Int] = Set(3)
                    }
                }
                @snippet() {
                    @callblock() {
                        |Set(1, 2, 3) empty
                    }
                    @outblock() {
                        |res6: Set[Int] = Set()
                    }
                }
                @spacer_half()

                @spacer_half()
                @snippet() {
                    @callblock() {
                        |Set(1, 2, 3) contains (42)
                    }
                    @outblock() {
                        |res8: Boolean = false
                    }
                }
                @spacer_half()
                *@
            }
        }

        <!-- ################################################################################## -->

        @defining("Map") { title =>

            @slide(title = title, subtitle = "Hierarchie") {

                @sidebyside() {
                    @Images.collection(title)
                } {
                    @fragment {
                        <h4>Map</h4>
                        @spacer()
                        <div class="indent">
                            <ul class="fragments">
                                <li><code>Iterable</code> aus Schlüssel-Wert-Paaren</li>
                                @spacer_half()
                                <li class="fragment">
                                    <code>HashMap</code>
                                    @spacer_half()
                                    <ul>
                                        <li>
                                            Standardimplementierung
                                        </li>
                                        <li class="fragment">
                                            basiert auf Hash-Tabelle
                                        </li>
                                    </ul>
                                </li>
                                @spacer_half()
                                <li class="fragment">
                                    <code>TreeMap</code>
                                    @spacer_half()
                                    <ul>
                                        <li>
                                            Standardimplementierung von <code>SortedMap</code>
                                        </li>
                                        <li class="fragment">
                                            ideal wenn Elemente eine Ordnung haben oder keine gute Hash-Funktion
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    }
                }
            }

            <!-- ################################################################################## -->

            @slide(title = title, subtitle = "Beispiele") {

                @sidebyside(gap = 10) {
                    @snippet() {
                        @callblock() {
                            |Map('a'->1, 'b'->2)
                        }
                        @outblock() {
                            |res0: Map[Char,Int] = Map(a->1, b->2)
                        }
                    }
                    @codesub2() {
                        Map initialiseren
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |Map('a'->1) ++ Map('b'->2)
                        }
                        @outblock() {
                            |res1: Map[Char,Int] = Map(a->1, b->2)
                        }
                    }
                    @codesub2() {
                        Maps verknüpfen
                    }
                } {
                    @snippet() {
                        @callblock() {
                            |Map('a'->1, 'b'->2) keySet
                        }
                        @outblock() {
                            |res2: Set[Char] = Set(a, b)
                        }
                    }
                    @codesub2() {
                        Schlüssel extrahieren
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |Map('a'->1, 'b'->2) values
                        }
                        @outblock() {
                            |res3: Iterable[Int] = MapLike(1, 2)
                        }
                    }
                    @codesub2() {
                        alle Werte extrahieren
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |Map('a'->1, 'b'->2) get ('c')
                        }
                        @outblock() {
                            |res4: Option[Int] = None
                        }
                    }
                    @codesub2() {
                        einzelnen Wert extrahieren
                    }

                    @*
                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |Map('a'->1, 'b'->2) mapValues (_ * 10)
                        }
                        @outblock() {
                            |res4: Map[Char,Int] = Map(a->10, b->20)
                        }
                    }
                    @codesub2() {
                        Werte modifizieren
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |Map('a'->1, 'b'->2) filterKeys (_ > 'a')
                        }
                        @outblock() {
                            |res5: Map[Char,Int] = Map(b->2)
                        }
                    }
                    @codesub2() {
                        Schlüssel herausfiltern
                    }
                    *@
                }

                @*
                @sidebyside(gap = 10) {
                    @spacer_half()
                    @snippet() {
                        @callblock() {
                            |Map("a" -> 1, "b" -> 2)("a")
                        }
                        @outblock() {
                            |res1: Int = 1
                        }
                    }
                    @spacer_half()
                    @snippet() {
                        @callblock() {
                            |Map("a" -> 1) + ("b" -> 2)
                        }
                        @outblock() {
                            |res2: Map[String,Int] = Map(a -> 1, b -> 2)
                        }
                    }
                    @spacer_half()
                    @snippet() {
                        @callblock() {
                            |Map("a" -> 1) ++ Map("b" -> 2)
                        }
                        @outblock() {
                            |res3: Map[String,Int] = Map(a -> 1, b -> 2)
                        }
                    }
                    @spacer_half()
                    @snippet() {
                        @callblock() {
                            |Map("a" -> 1, "b" -> 2) - "a"
                        }
                        @outblock() {
                            |res4: Map[String,Int] = Map(b -> 2)
                        }
                    }
                    @spacer_half()
                    @snippet() {
                        @callblock() {
                            |Map("a" -> 1, "b" -> 2) -- Set("a", "c")
                        }
                        @outblock() {
                            |res5: Map[String,Int] = Map(b -> 2)
                        }
                    }
                } {
                    @snippet() {
                        @callblock() {
                            |Map("a" -> 1, "b" -> 2) contains ("z")
                        }
                        @outblock() {
                            |res6: Boolean = false
                        }
                    }

                    @spacer_half()
                    @snippet() {
                        @callblock() {
                            |Map("a" -> 1, "b" -> 2) contains ("z")
                        }
                        @outblock() {
                            |res9: Boolean = false
                        }
                    }
                    @spacer_half()

                    @spacer_half()

                }
                *@
            }
        }

        <!-- ################################################################################## -->

        @defining("Seq") { title =>

            @slide(title = title, subtitle = "Hierarchie") {

                @sidebyside() {
                    @Images.collection(title)
                } {
                    @fragment {
                        <h4>Seq</h4>
                        @spacer()
                        <div class="indent">
                            <ul>
                                <li>geordnete <code>Iterable</code></li>
                                @spacer_half()
                                <li class="fragment">
                                    <code>IndexedSeq</code>
                                    @spacer_half()
                                    <ul>
                                        <li>
                                            optimiert für Direktzugriff
                                        </li>
                                        <li class="fragment">
                                            Standardimplementierung: <code>Vector</code>
                                        </li>
                                    </ul>
                                </li>
                                @spacer_half()
                                <li class="fragment">
                                    <code>LinearSeq</code>
                                    @spacer_half()
                                    <ul>
                                        <li>
                                            optimiert für sequenziellen Zugriff
                                        </li>
                                        <li class="fragment">
                                            Standardimplementierung: <code>List</code>
                                        </li>
                                    </ul>
                                </li>
                                @spacer_half()
                                <li class="fragment">
                                    <code>Buffer</code>
                                    @spacer_half()
                                    <ul>
                                        <li>
                                            optimiert fürs Anhängen
                                        </li>
                                        <li class="fragment">
                                            <var>mutable</var>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    }
                }
            }

            <!-- ################################################################################## -->

            @slide(title = title, subtitle = "Beispiele") {

                @sidebyside(gap = 10) {
                    @snippet() {
                        @callblock() {
                            |List(1,2,3)
                        }
                        @outblock() {
                            |res0: List[Int] = List(3, 2, 1)
                        }
                    }
                    @codesub2() {
                        Liste initialisieren
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |List(1,2,3) reverse
                        }
                        @outblock() {
                            |res1: List[Int] = List(3, 2, 1)
                        }
                    }
                    @codesub2() {
                        Reihenfolge umdrehen
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |List(1,2,3,3,2,1) distinct
                        }
                        @outblock() {
                            |res2: List[Int] = List(1, 2, 3)
                        }
                    }
                    @codesub2() {
                        doppelte Elemente entfernen
                    }
                } {
                    @snippet() {
                        @callblock() {
                            |List(1,2,3) indexOf 2
                        }
                        @outblock() {
                            |res3: Int = 1
                        }
                    }
                    @codesub2() {
                        Element suchen
                    }

                    @spacer2()

                    @snippet() {
                        @callblock() {
                            |List(3,2,1) sorted
                        }
                        @outblock() {
                            |res4: List[Int] = List(1, 2, 3)
                        }
                    }
                    @codesub2() {
                        automatisch Sortieren
                    }

                    @*@spacer2()

                    @snippet() {
                        @callblock() {
                            |List(333,22,1) sortBy (_.toString.size)
                        }
                        @outblock() {
                            |res5: List[Int] = List(1, 22, 333)
                        }
                    }
                    @codesub2() {
                        manuell sortieren
                    }*@
                }
            }
        }

        <!-- ################################################################################## -->

        @slide(title = "Übersicht") {

            @spacer2()

            @sidebyside() {
                @Images.collectpckg()
            } {
                @spacer2()@spacer2()
                @Images.collection("iterable")
            }
        }

        <!-- ################################################################################## -->

        @uebung(implicitSlide.id)
    }
}