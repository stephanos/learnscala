@implicitSlide = @{ Content.web }

@defining(implicitSlide.label) { implicit topic =>

    @layout.slidedeck(topic) {

        @slidehead() {
            @topic
        } {

        }

        <!-- ################################################################################## -->

        @overview

        <!-- ################################################################################## -->

        @*
        @defining("Unfiltered") { title =>

            @titleslide(title) {
            }

            <!-- ################################################################################## -->

            @titleslide(title, subtitle = "Demo") {
                @demo()
            }
        }

        <!-- ################################################################################## -->

        @overview
        *@

        <!-- ################################################################################## -->

        @defining("Spray") { title =>

            @titleslide(title) {
                <div class="indent">
                    <ul>
                        <li>
                            Erstellen von RESTful Web Services
                        </li>
                        <li class="fragment">
                            basiert auf <var>Akka</var>
                        </li>
                        <li class="fragment">
                            <em>eventbasiert</em> & <em>asynchron</em>
                        </li>
                        <li class="fragment">
                            flexible & erweiterbare <em>Domain Specific Language</em>
                        </li>
                        <li class="fragment">
                            unabhängig vom Web Server / Container<br/>
                            (unterstützt <em>Servlet 3.0</em> plus Jetty 7 und Tomcat 6)
                        </li>
                    </ul>
                </div>
            }

            <!-- ################################################################################## -->

            @titleslide(title, subtitle = "Beispiel") {
                @sourcecode(fragment = false) {
                    |trait CalculatorService @("extends") Directives with CustomMarshallers {
                    |
                    |  val calculatorService = {
                    |    path("add" / DoubleNumber / DoubleNumber) {  // z.B. '/add/40/2'
                    |      (a, b) =>
                    |        get {                                    // HTTP GET
                    |          completeWith(a + b)
                    |        }
                    |      } ~
                    |    path("factorial" / IntNumber) {              // z.B. '/factorial/4'
                    |      (n) =>
                    |        detach {                                 // calculate asynchronously
                    |          get {                                  // HTTP GET
                    |            completeWith(factorial(n))
                    |          }
                    |        }
                    |      }
                    |    }
                    |
                    |  private def factorial(n: Int): Int =
                    |    if (n == 0) 1 else n * factorial(n - 1)
                    |}
                }
            }
        }

        <!-- ################################################################################## -->

        @overview

        <!-- ################################################################################## -->

        @*
        @defining("Scalatra") { title =>

            @titleslide(title) {

            }

            <!-- ################################################################################## -->

            @titleslide(title, subtitle = "Demo") {
                @demo()
            }
        }

        <!-- ################################################################################## -->

        @overview
        *@

        <!-- ################################################################################## -->

        @defining("Play2") { title =>

            @titleslide(title) {
                <div class="indent">
                    <ul class="fragments">
                        <li>
                            Web-Framework auf Basis von <em>JBoss Netty</em>
                        </li>
                        <li>
                            Teil vom <var>Typesafe Stack</var>
                        </li>
                        <li>
                            basiert auf <var>sbt</var> und <var>Akka</var>
                        </li>
                        <li>
                            komplette <em>Neuentwicklung</em> von Play 1
                        </li>
                        <li>
                            Schnittstellen zu Scala und Java
                        </li>
                        <li>
                            inspiriert von <var>Ruby on Rails</var> und <var>Django</var>
                        </li>
                        <li>
                            Besonderheiten:
                            @spacer_half()
                            <ul class ="fragments">
                                <li>
                                    <em>zustandslos</em>
                                </li>
                                <li>
                                    <em>eventbasiert</em>
                                </li>
                                <li>
                                    <em>on-the-fly recompile</em>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            }

            <!-- ################################################################################## -->

            @headslide() {
                @title
            } {
                @sidebyside() {
                    @sourcecode(fragment = false) {
                        |// app/views/hello.scala.html
                        |@@(name: String)
                        |
                        |&lt;html&gt;
                        |  &lt;body&gt;
                        |    &lt;h1&gt;Hello @@name!&lt;/h1&gt;
                        |  &lt;/body&gt;
                        |&lt;/html&gt;
                    }
                    <sub>View</sub>
                } {
                    @fragment {
                        @sourcecode(fragment = false) {
                            |// app/controllers.Application.scala
                            |package controllers
                            |
                            |import play.api.mvc._
                            |
                            |object Application extends Controller {
                            |   def hello(name: String) = Action {
                            |       Ok(views.html.hello(name))
                            |   }
                            |}
                        }
                        <sub>Controller</sub>
                    }
                }

                @spacer2()

                @fragment {
                    @sourcecode(fragment = false) {
                        |// conf/routes
                        |GET   /hello/:name        controllers.Application.hello(name: String)
                    }
                    <sub>Routing</sub>
                }
            }

            @headslide() {
                @title
            } {
                @sourcecode() {
                    |val userForm = Form (
                    |  mapping (
                    |    "user" -> nonEmptyText,
                    |    "password" -> nonEmptyText,
                    |    "age" -> number(min=0, max=100)
                    |  )
                    |)
                    |
                    |val (user, password, age) = userForm.bindFromRequest.get
                }

                @spacer()

                @sourcecode() {
                    |val ok = Ok("Hello world!")
                    |val notFound = NotFound
                    |val pageNotFound = NotFound(&lt;h1&gt;Page not found&lt;/h1&gt;)
                    |val badRequest = BadRequest(views.html.form(formWithErrors))
                    |val oops = InternalServerError("Oops")
                    |val anyStatus = Status(488)("Strange response type")
                }
            }

            @headslide() {
                @title
            } {
                @sourcecode() {
                    |def feedTitle(feedUrl: String) = Action {
                    |  Async {
                    |    WS.url(feedUrl).get().map { response =>
                    |      Ok("Feed title: " + (response.json \ "title").as[String])
                    |    }
                    |  }
                    |}
                }

                @spacer()

                @sourcecode() {
                    |def index = Action {
                    |  val promiseOfInt = Akka.future { intensiveComputation() }
                    |  Async {
                    |    promiseOfInt.orTimeout("Oops", 1000).map { eitherIntOrTimeout =>
                    |      eitherIntOrTimeout fold (
                    |        i => Ok ("Got result: " + i),
                    |        timeout => InternalServerError ("timeout")
                    |      )
                    |    }
                    |  }
                    |}
                }
            }
        }

        @*
        <!-- ################################################################################## -->

        @overview

        <!-- ################################################################################## -->

        @defining("Lift") { title =>

            @titleslide(title) {

            }
        }
        *@

        <!-- ################################################################################## -->

        @overview

        @*
        <!-- ################################################################################## -->

        @defining("Dispatch") { title =>

            @titleslide(title) {

                @sourcecode() {
                    |http(:/("dispatch.databinder.net") >:+ {
                    |  (headers, req) =>
                    |    headers("content-type") filter {
                    |      _.contains("text/html")
                    |    }.headOption map { _ =>
                    |      req &lt;/&gt; { nodes => (nodes \\ "h1").text }
                    |    } getOrElse {
                    |      req >> { _ => "unknown content type" }
                    |    }
                    |})
                }
            }
        }
        *@
    }
}


@overview(implicit topic: String) = {
    @slide(title = "Überblick der Bibliotheken") {
        @Images.webTools()
    }
}