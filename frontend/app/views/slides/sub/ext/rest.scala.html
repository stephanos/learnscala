<!--
@headslide(title = "Dispatch") {
    Dispatch
} {
    TODO
}-->

@defining("Web II") { implicit topic =>

    @layout.slidedeck(topic) {

        @slidehead() {
            @topic
        } {

        }

        <!-- ################################################################################## -->

        @defining("Unfiltered") { title =>

            @headslide(title = title) {
                @title
            } {

            }
        }

        <!-- ################################################################################## -->

        @defining("Spray") { title =>

            @headslide(title = title) {
                @title
            } {
                <div class="indent">
                    <ul>
                        <li>
                            Erstellen von RESTful Web Services
                        </li>
                        <li class="fragment">
                            basiert auf <var>Akka</var>
                        </li>
                        <li class="fragment">
                            <em>eventbasiert</em> & <em>asynchron</em>
                        </li>
                        <li class="fragment">
                            flexible & erweiterbare <em>Domain Specific Language</em>
                        </li>
                        <li class="fragment">
                            unabhängig vom Web Server / Container<br/>
                            (unterstützt <em>Servlet 3.0</em> plus Jetty 7 und Tomcat 6)
                        </li>
                    </ul>
                </div>
            }

            <!-- ################################################################################## -->

            @headslide(title = title, subtitle = "Beispiel") {
                @title
            } {
                @sourcecode(fragment = false) {
                    |trait CalculatorService @("extends") Directives with CustomMarshallers {
                    |
                    |    val calculatorService = {
                    |        path("add" / DoubleNumber / DoubleNumber) {    // z.B. '/add/40/2'
                    |            (a, b) =>
                    |                get {                                  // HTTP GET
                    |                    completeWith(a + b)
                    |                }
                    |        } ~
                    |        path("factorial" / IntNumber) {                // z.B. '/factorial/4'
                    |            (n) =>
                    |                detach {                               // calculate asynchronously
                    |                    get {                              // HTTP GET
                    |                        completeWith(factorial(n))
                    |                    }
                    |                }
                    |        }
                    |    }
                    |
                    |    private def factorial(n: Int): Int =
                    |       if (n == 0) 1 else n * factorial(n - 1)
                    |}
                }
            }
        }
    }
}
