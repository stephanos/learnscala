@defining(Content.kontrollstrukturen.label) { implicit topic =>

    @layout.slidedeck(topic) {

        @slidehead() {
            @topic
        } {

        }

        <!-- ################################################################################## -->

        @headslide() {
            @topic
        } {
            @spacer_half()

            <div style="width: 40%" class="dcenter">
                <ul class="fragments">
                    <li>if-else</li>
                    <li>while</li>
                    <li>do-while</li>
                </ul>
                @spacer()
                <ul class="fragments">
                    <li>for</li>
                    <li>match</li>
                </ul>
            </div>

            @spacer()

            @infobox() {
                Jede Kontrollstruktur ist ein Ausdruck;<br/>
                besitzt also Rückgabewert und -typ.
            }
        }

        <!-- ################################################################################## -->

        @defining("if-else") { title =>

            @titleslide(title = title) {

                @sourcecode() {
                    |def max (x: Int, y: Int): Int = {
                    |  if (x > y) {
                    |    x
                    |  } else {
                    |    y
                    |  }
                    |}
                }

                @iseq()

                @sourcecode() {
                    |def max (x: Int, y: Int) =
                    |  if (x > y)
                    |    x
                    |  else
                    |    y
                }

                @iseq()

                @sourcecode() {
                    |def max (x: Int, y: Int) =
                    |  if (x > y) x else y
                }
            }

            <!-- ################################################################################## -->

            @titleslide(title = title) {

                @snippet() {
                    @sourceblock() {
                        |def check (x: Int) =
                        |  if (x > 0) "positive"
                    }
                    @outblock() {
                        |check: (x: Int)Any
                    }
                }
                @codesub2() {
                    fehlt <code>else</code> hat der Zweig den Typ <code>Unit</code>
                }

                @spacer2()

                @snippet() {
                    @sourceblock() {
                        |def check (x: Int) =
                        |  if (x == 0) 0
                        |  else if (x > 0) 'p'
                        |  else 'n'
                    }
                    @outblock() {
                        |check: (x: Int)Int
                    }
                }
                @codesub2() {
                    <code>Int</code> ist die Basisklasse von Typ <code>Char</code>
                }
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "while") {

            @sidebyside(gap = 15) {
                @snippet() {
                    @sourceblock() {
                        |def countdown() {
                        |  var i = 10
                        |  while (i >= 0) {
                        |    print(i + " ");
                        |    i -= 1
                        |  }
                        |}
                    }
                    @callblock() {
                        |countdown()
                    }
                    @outblock() {
                        |10 9 8 7 6 5 4 3 2 1 0
                    }
                }
                @codesub2() {
                    Kopfschleife
                }
            } {
                @snippet() {
                    @sourceblock() {
                        |def countdown() {
                        |  var i = 10
                        |  do {
                        |    print(i + " ")
                        |    i -= 1
                        |  } while (i >= 0)
                        |}
                    }
                    @callblock() {
                        |countdown()
                    }
                    @outblock() {
                        |10 9 8 7 6 5 4 3 2 1 0
                    }
                }
                @codesub2() {
                    Fußschleife
                }
            }

            @*@warnbox(hr = false) {
                Klassische Schleifen werden in Scala eher selten eingesetzt;
                man sollte sich stets fragen ob es nicht eine funktionalere Variante gibt.
            }*@
        }

        <!-- ################################################################################## -->

        @titleslide(title = "for") {

            @spacer()

            @sidebyside() {
                @snippet() {
                    @sourceblock() {
                        |def countOut() {
                        |  for (i <- 1 to 10) {
                        |    print(i + " ")
                        |  }
                        |}
                    |}
                    @callblock() {
                        |countOut()
                    }
                    @outblock() {
                        |1 2 3 4 5 6 7 8 9 10
                    }
                }
            } {
                @snippet() {
                    @sourceblock() {
                        |def countdown() {
                        |  for (i <- 10 to 0 by -1) {
                        |    print(i + " ")
                        |  }
                        |}
                    |}
                    @callblock() {
                        |countdown()
                    }
                    @outblock() {
                        |10 9 8 7 6 5 4 3 2 1 0
                    }
                }
            }
        }

        <!-- ################################################################################## -->

        @uebung("B14-1")

        <!-- ################################################################################## -->

        @defining("match") { title =>

            @titleslide(title = title, subtitle = "Konstante-Pattern") {

                @sourcecode() {
                    |def days (month: Int): Int =
                    |  month match {
                    |    case 1   => 31
                    |    case 2   => 28
                    |    case 3   => 31
                    |    case 4   => 30
                    |    case 5   => 31
                    |    case 6   => 30
                    |    case 7   => 31
                    |    case 8   => 31
                    |    case 9   => 30
                    |    case 10  => 31
                    |    case 11  => 30
                    |    case 12  => 31
                    |  }
                }
                @codesub2() {
                    Konstante-Pattern
                }
            }

            <!-- ################################################################################## -->

            @titleslide(title = title, subtitle = "Alternativ-Pattern") {

                @sourcecode(id = "days2") {
                    |def days (month: Int): Int =
                    |  month match {
                    |    case 2                           => 28
                    |    case 4 | 6 | 9 | 11              => 30
                    |    case 1 | 3 | 5 | 7 | 8 | 10 | 12 => 31
                    |  }
                }
                @codesub2() {
                    Alternativ-Pattern <code>|</code>
                }

                @spacer()

                @snippet() {
                    @callblock(reference = "days2") {
                        |val febDays = days (2)
                    }
                    @outblock() {
                        |febDays: Int = 28
                    }
                    @callblock() {
                        |days (13)
                    }
                    @outblock(error = true) {
                        |scala.MatchError: 13 (of class java.lang.Integer)
                        |   at .days(&lt;console&gt;:8)
                    }
                }
                @codesub2() {
                    <code>MatchError</code> bei fehlendem match
                }
            }

            <!-- ################################################################################## -->

            @titleslide(title = title, subtitle = "Wildcard- und Guarded-Pattern") {

                @sourcecode() {
                    |def days (month: Int): Int =
                    |  month match {
                    |    case 2              => 28
                    |    case 4 | 6 | 9 | 11 => 30
                    |    case _              => 31
                    |  }
                }
                @codesub2() {
                    Wildcard-Pattern <code>_</code>
                }

                @spacer()

                @sourcecode() {
                    |def days (month: Int, leap: Boolean): Int =
                    |  month match {
                    |    case 2 if leap       => 29
                    |    case 2               => 28
                    |    case 4 | 6 | 9 | 11  => 30
                    |    case _               => 31
                    |  }
                }
                @codesub2() {
                    Guarded-Pattern <code>if</code>
                }
            }

            <!-- ################################################################################## -->

            @titleslide(title = title, subtitle = "Variable-Pattern") {

                @sourcecode() {
                    |def days (month: Int, leap: Boolean): Int =
                    |  month match {
                    |    case 2 if leap       => 29
                    |    case 2               => 28
                    |    case 4 | 6 | 9 | 11  => 30
                    |    case m               =>
                    |       val msg = "Unknown month " + m
                    |       throw new IllegalArgumentException(msg)
                    |  }
                }
                @codesub2() {
                    Variable-Pattern <comment>(muss mit Kleinbuchstaben beginnen)</comment>
                }
            }
        }

        <!-- ################################################################################## -->

        @defining("try-catch-finally") { title =>

            @titleslide(title = title) {

                @snippet() {
                    @sourceblock() {
                        |def getWords (msg: String) =
                        |   try {
                        |       println (msg.split(' '))
                        |   } catch {
                        |       case ex: NullPointerException =>
                        |           println ("No message")
                        |       case _ =>
                        |           println ("Unexpected internal error")
                        |   } finally {
                        |       // cleanup
                        |   }
                    }
                    @callblock() {
                        |getWords (null)
                    }
                    @outblock() {
                        |No message
                    }
                }
                @codesub2() {
                    Typ-Pattern
                }
            }
        }

        <!-- ################################################################################## -->

        @uebung("B14-2")
    }
}