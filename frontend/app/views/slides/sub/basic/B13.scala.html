@implicitSlide = @{ Content.methoden }

@defining(implicitSlide.label) { implicit topic =>

    @layout.slidedeck(topic) {

        @slidehead() {
            @topic
        } {
        }

        <!-- ################################################################################## -->

        @titleslide(title = "Definition") {

            @sidebyside((40,60)) {
                @snippet() {
                    @sourceblock() {
                        |def hello(): String = {
                        |  return "Hello World"
                        |}
                    }
                    @outblock() {
                        |hello: String
                    }
                }
            } {
                @indent() {
                    <ul class="fragments">
                        <li>
                            <code>def</code> startet die Definition
                        </li>
                        <li>
                            <code>hello</code> ist der Name der Methode
                        </li>
                        <li>
                            <code>()</code> beinhaltet die Liste der Parameter
                        </li>
                        <li>
                            <code>String</code> ist der Rückgabetyp
                        </li>
                        <li>
                            <code>{ .. }</code> enthält Implementierung
                        </li>
                    </ul>
                }
            }

            @spacer()

            @*@infobox() {
                <code>def</code> leitet eine Methode ein - diese hat immer einen Rückgabetyp.
            }*@

            <details>
                <a href="http://stackoverflow.com/questions/2529184/">
                    Difference between method and function in Scala
                </a>
            </details>

            @notes {
                - [STIL] mit Kleinbuchstabe beginnen
                - [STIL] (again) 2 Leerzeichen zum Einrücken
                - [STIL] offene Klammer '@Html("{")' stets auf gleicher Zeile wie Definition
            }
        }

        <!-- ################################################################################## -->

        @*
        <h3>Variablen <var><></var> Methoden</h3>

        <div>
            <div class="sidebyside">
                comp.snippet() {
                    |val rand = util.Random.nextInt(10)
                    |
                    |println(rand)
                    |println(rand)
                }
                comp.snippet() {
                    |def rand = util.Random.nextInt(10)
                    |
                    |println(rand)
                    |println(rand)
                }
            </div>
        </div>

        <div class="fragment">
            <div class="sidebyside">
                comp.console() {
                    |rand: Int = 6
                    |6
                    |6
                }
                comp.console() {
                    |rand: Int
                    |3
                    |9
                }
            </div>
        </div>

        @infobox() {
            <code>val</code> wird einmal berechnet und <strong>speichert</strong> das Ergebnis, <br/>
            <code>def</code> wird bei jedem Aufruf <strong>neu berechnet</strong>.
        }
        *@

        <!-- ################################################################################## -->

        <!--<section>
        @summary(){
            @summaries.methoden()
        }
        </section>-->

        <!-- ################################################################################## -->

        @*
            @headbody() {
                Methoden: Name
            } {
                <div class="sidebyside">
                    @snippet() {
                        @sourceblock() {
                            |def √(): String = {
                            |   return "square root"
                            |}
                        }
                        @outblock() {
                            |$u221A: ()String
                        }
                        @sourceblock() {
                            |def $(): String = {
                            |   return "dollar"
                            |}
                        }
                        @outblock() {
                            $: ()String
                        }
                    }
                </div>
            } {
            }
            <details>
                <a href="http://stackoverflow.com/questions/7656937/valid-identifier-characters-in-scala">
                    Welche Zeichen sind in Methodennamen erlaubt?
                </a>
            </details>
        *@

        <!-- ################################################################################## -->

        <!--
            http://stackoverflow.com/questions/1181533/what-are-the-precise-rules-for-when-you-can-omit-parenthesis-dots-braces-f
        -->
        @titleslide(title = "Optionales") {

            @sidebyside() {
                @sourcecode(id = "hello") {
                    |def hello(): String =
                    |  return "Hello World"
                }
            } {
                @codenote2() {
                    <strong><em>ohne</em></strong> geschweifte Klammern<br/>
                    <comment>Wann? Bei nur einer Zeile</comment>
                }
            }

            @spacer()

            @sidebyside() {
                @sourcecode() {
                    |def hello(): String =
                    |  "Hello World"
                }
            } {
                @codenote2() {
                    <strong><em>ohne</em></strong> <code>return</code><br/>
                    <comment>Wann? Fast immer!</comment>
                }
            }

            @spacer()

            @sidebyside() {
                @sourcecode() {
                    |def hello: String =
                    |  "Hello World"
                }
            } {
                @codenote2() {
                    <strong><em>ohne</em></strong> Parameterliste<br/>
                    <comment>Wann? Keine Parameter</comment>
                }
            }

            @spacer()

            @sidebyside() {
                @sourcecode() {
                    |def hello =
                    |  "Hello World"
                }
            } {
                @codenote2() {
                    <strong><em>ohne</em></strong> Rückgabetyp<br/>
                    <comment>Wann? Nicht öffentlich und nicht rekursiv oder überladen</comment>
                }
            }

            @spacer()

            @sidebyside() {
                @sourcecode() {
                    |def hello = "Hello World"
                }
            } {
                @codenote2() {
                    <strong><em>ohne</em></strong> Zeilenumbruch
                }
            }

            @notes {
                - [BP] 'return': nur verwenden um Verzweigung zu vermeiden
                - [STIL] sehr kurzen Rump (<30 Zeichen) in eine Zeile
                - [STIL] recht kurzen Rump (< 70 Zeichen) ohne Klammern
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "Unit") {

            @sidebyside(gap = 10) {
                @snippet() {
                    @sourceblock() {
                        |def hello() = {
                        |  println("Hello World")
                        |}
                    }
                    @outblock() {
                        |hello: Unit
                    }
                }
                @codesub2() {
                    <var>unüblich</var>
                }
            } {
                @snippet() {
                    @sourceblock() {
                        |def hello() {
                        |  println("Hello World")
                        |}
                    }
                    @outblock() {
                        |hello: Unit
                    }
                }
                @codesub2() {
                    <em>üblich</em>
                }
            }

            @spacer2()

            @infobox() {
                Hat eine Methode keinen Rückgabewert, hat sie den Typ <code>Unit</code>.<br/>
                Sie wird überlicherweise @uline("ohne") <code>=</code> definiert.
            }

            @notes {
                - [HINT] Unit = Uninteresting
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "Parameter") {

            @snippet() {
                @sourceblock(id = "double") {
                    |def double(x: Int) =
                    |  2 * x
                }
                @outblock() {
                    |double: (x: Int)Int
                }
            }

            @codesub2() {
                Methode mit <em>1</em> Parameter
            }

            @spacer_half()

            @snippet() {
                @sourceblock(id = "add") {
                    |def add(x: Float, y: Float) =
                    |  x + y
                }
                @outblock() {
                    |add: (x: Float, y: Float)Float
                }
            }

            @codesub2() {
                Methode mit <em>2</em> Parametern
            }

            @spacer_half()

            @snippet() {
                @sourceblock(id = "print") {
                    |def printFirst(s: String*) =
                    |  println(s(0))
                }
                @outblock() {
                    |printFirst: (s: String*)Unit
                }
            }

            @codesub2() {
                Methode mit <em>n</em> Parametern
            }

            @notes {
                - [STIL] Leerzeichen nach ','
                - [STIL] Methoden mit mehr als 3 Parametern vermeiden!
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "Interne Methoden") {
            @snippet() {
                @sourceblock(id = "print") {
                    |def doubleAndPlusOne(x: Int) = {
                    |  def double(x: Int)  =  x * 2
                    |  def plusOne(x: Int) =  x + 1
                    |
                    |  plusOne(double(x))
                    |}
                }
                @outblock() {
                    |doubleAndPlusOne: (x: Int)Int
                }
            }
            @codesub2() {
                Methoden können interne Hilfsmethoden definieren
            }
        }

        <!-- ################################################################################## -->

        @quiz() {
            @Quiz.method1()
        }

        <!-- ################################################################################## -->

        @defining("Aufruf") { title =>

            @titleslide(title = title, subtitle = "0 Parameter", connector = ":") {

                @sidebyside(gap = 10) {
                    @subhead() {
                        mit Liste
                    }

                    @sourcecode(id = "hello_w") {
                        |def hello() {
                        |  println("Hello World")
                        |}
                    }

                    @spacer()

                    @sidebyside(gap = 5) {
                        @snippet() {
                            @callblock(reference = "hello_w") {
                                |hello()
                            }
                            @outblock() {
                                |Hello World
                            }
                        }
                    } {
                        @snippet() {
                            @callblock(reference = "hello_w") {
                                |hello
                            }
                            @outblock() {
                                |Hello World
                            }
                        }
                    }

                    @spacer()

                    @infobox() {
                        Methode mit Parameterliste kann ohne @uline("oder")
                        mit <code>()</code> aufgerufen werden.
                    }
                } {
                    @subhead() {
                        ohne Liste
                    }

                    @sourcecode(id = "hello_wo") {
                        |def hello {
                        |  println("Hello World")
                        |}
                    }

                    @spacer()

                    @sidebyside(gap = 5) {
                        @snippet() {
                            @callblock(reference = "hello_wo") {
                                |hello()
                            }
                            @outblock(error = true) {
                                |error: Unit does
                                |not take parameters
                            }
                        }
                    } {
                        @snippet() {
                            @callblock(reference = "hello_wo") {
                                |hello
                            }
                            @outblock() {
                                |Hello World
                            }
                        }
                    }

                    @spacer_half()

                    @infobox() {
                        Methode ohne Parameterliste kann auch @uline("nur")
                        ohne <code>()</code> aufgerufen werden.
                    }
                }

                @notes {
                    - [STIL] keine Leerzeichen um '()'
                }
            }

            <!-- ################################################################################## -->

            @titleslide(title = title, subtitle = "1 Parameter", connector = ":") {

                @snippet() {
                    @callblock(reference = "double") {
                        |double(2)
                    }
                    @outblock() {
                        |res0: Int = 2
                    }
                }
                @iseq()
                @snippet() {
                    @callblock(reference = "double") {
                        |double { 1 + 1 }
                    }
                    @outblock() {
                        |res0: Int = 2
                    }
                }

                @codesub2() {
                    Aufruf einer <em>1-parametrigen</em> Methode
                }
            }

            <!-- ################################################################################## -->

            @titleslide(title = title, subtitle = "2 Parameter", connector = ":") {

                @snippet() {
                    @callblock(reference = "add") {
                        |add(2, 2)
                    }
                    @outblock() {
                        |res0: Float = 2.0
                    }
                }
                @iseq()
                @snippet() {
                    @callblock(reference = "add") {
                        |add(2, {
                        |  add(1, 1)
                        |})
                    }
                    @outblock() {
                        |res0: Float = 2.0
                    }
                }
                @iseq()
                @snippet() {
                    @callblock(reference = "add") {
                        |add({
                        |  add(1, 1)
                        |}, {
                        |  add(1, 1)
                        |})
                    }
                    @outblock() {
                        |res0: Float = 2.0
                    }
                }

                @codesub2() {
                    Aufruf einer <em>2-parametrigen</em> Methode
                }
            }
        }

        <!-- ################################################################################## -->

        @titleslide(title = "default & named Parameter") {

            @sourcecode(id = "method_default") {
                |def announce(town: String, time: String = "shortly", weather: String = "nice") {
                |  println("We will be landing in " + town + " " + time + ". " +
                |          "The weather is " + weather + ".")
                |}
            }

            @spacer2()

            @sidebyside() {
                @snippet() {
                    @callblock(reference = "method_default") {
                        |announce("Berlin")
                    }
                    @outblock() {
                        |We will be landing in Berlin shortly.
                        |The weather is nice.
                    }
                }
            } {
                @snippet() {
                    @callblock(reference = "method_default") {
                        |announce("London", weather = "rainy")
                    }
                    @outblock() {
                        |We will be landing in London shortly.
                        |The weather is rainy.
                    }
                }
            }

            @spacer()

            @sidebyside() {
                @snippet() {
                    @callblock(reference = "method_default") {
                        |announce(time = "in 10 min",
                        |         town = "Paris")
                    }
                    @outblock() {
                        |We will be landing in Paris in 10 min.
                        |The weather is nice.
                    }
                }
            } {
                @snippet() {
                    @callblock(reference = "method_default") {
                        |announce(weather = "sunny", "Berlin")
                    }
                    @outblock(error = true) {
                        |not enough arguments:
                        |Unspecified value parameter town
                    }
                }
            }

            @notes {
                - [STIL] Leerzeichen um '='
            }
        }

        <!-- ################################################################################## -->

        @quiz() {
            @Quiz.method2()
        }
    }
}